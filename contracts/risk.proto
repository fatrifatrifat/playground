syntax = "proto3";

package club.trading.v1;

import "common.proto";

option cc_enable_arenas = true;

message StrategyRiskLimits {
  string strategy_id = 1;

  int64 max_order_qty_e8 = 2;
  int64 max_position_abs_e8 = 3;
  int64 max_notional_per_order_e8 = 4;
  int64 max_notional_total_e8 = 5;
  int64 max_orders_per_min = 6;
  int64 max_daily_loss_e8 = 7;
}

message RiskDecision {
  EventMeta meta = 1;
  string intent_id = 2;
  bool allowed = 3;
  repeated string reasons = 4;   // e.g. "MAX_POSITION_BREACH"
  int64 projected_position_e8 = 5;
  int64 projected_notional_e8 = 6;
}

message KillSwitchEvent {
  EventMeta meta = 1;
  string strategy_id = 2;
  bool active = 3;
  string reason = 4;
}
